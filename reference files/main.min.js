 const sections = document.querySelectorAll("section,header");
 const navLinks = document.querySelectorAll(".navmenu a");
 window.addEventListener("scroll",()=>{let current = "";
 sections.forEach(section =>{
    const sectionTop = section.offsetTop - 80;
    
    if(pageYOffset >= sectionTop){
        current = section.getAttribute("id");}});
        navLinks.forEach(link =>{
            link.classList.remove("active");
    if(link.getAttribute("href")=== `#${current}`){
        link.classList.add("active");}});
    });
const modal = document.getElementById("previewModal");
const modalImg = document.getElementById("modalImage");
const closeBtn = document.querySelector(".close");
    if(modal && modalImg && closeBtn){
        document.querySelectorAll(".preview-btn,.preview").forEach(button =>{
            button.addEventListener("click",()=>{modal.style.display = "flex";
            modalImg.src = button.getAttribute("data-image")|| button.src;
            modalImg.alt = button.alt || "Template Preview";});
        });
        closeBtn.addEventListener("click",()=>{
            modal.style.display = "none";});
            modal.addEventListener("click",(e)=>{
                if(e.target === modal){
                    modal.style.display = "none";}});
}


// main.js (Improved Version)

// Highlight nav link on scroll
const sections = document.querySelectorAll("section, header");
const navLinks = document.querySelectorAll(".navmenu a");

window.addEventListener("scroll", () => {
  let current = "";

  sections.forEach(section => {
    const sectionTop = section.offsetTop - 80; // adjust for navbar height
    if (pageYOffset >= sectionTop) {
      current = section.getAttribute("id");
    }
  });

  navLinks.forEach(link => {
    link.classList.remove("active");
    if (link.getAttribute("href") === `#${current}`) {
      link.classList.add("active");
    }
  });
});

// Modal image preview (supports multiple preview buttons/images)
const modal = document.getElementById("previewModal");
const modalImg = document.getElementById("modalImage");
const closeBtn = document.querySelector(".close");

if (modal && modalImg && closeBtn) {
  document.querySelectorAll(".preview-btn, .preview").forEach(button => {
    button.addEventListener("click", () => {
      modal.style.display = "flex"; // use flex for centering
      modalImg.src = button.getAttribute("data-image") || button.src;
      modalImg.alt = button.alt || "Template Preview";
    });
  });

  closeBtn.addEventListener("click", () => {
    modal.style.display = "none";
  });

  // Close modal on outside click
  modal.addEventListener("click", (e) => {
    if (e.target === modal) {
      modal.style.display = "none";
    }
  });
}
